
# AES GCM Encryption and Decryption

Instructions for using the utility

## Add the following dependencies to your project:
```xml
<dependency>
    <groupId>org.bouncycastle</groupId>
    <artifactId>bcprov-jdk15on</artifactId>
    <version>1.70</version>
</dependency>

<dependency>
    <groupId>com.google.code.gson</groupId>
    <artifactId>gson</artifactId>
    <version>2.10.1</version>
</dependency>
```

Add the following classes to your project:
```
KeyUtil.java
EncryptionUtil.java
```
Make sure to rename the package name of these files acording to your project's package name.

## Add BouncyCastleProvider to java.security.Security
Add the BouncyCastleProvider to the java Security class. Below is the implementation of the same.
```java
import java.security.Security;
import org.bouncycastle.jce.provider.BouncyCastleProvider;

class MainClass {
    public static void main(String[] args) {
        Security.addProvider(new BouncyCastleProvider());

        // Encryption / Decryption code.
    }
}
```

## Generating a Key Pair
1\.  Generate Encryption Key Pair:
```java
DHKeyPair keyPair = KeyUtil.generateKeyPair();
```

2\. Save your Private key:
```java
String privateKey = keyPair.getPrivateKey();
```

3\. Share your Public key with the other party:
```java
String publicKey = keyPair.getPublicKey();
```

## Generating a Shared key between two parties:
1\. Get the public key from the other party:
```java
String publicKeyOfOtherParty = "PUBLIC_KEY_GOES_HERE";
```

2\. Generate the sharedKey using your private key and public key of other party:
```java
String myPrivateKey = "YOUR_PRIVATE_KEY_GOES_HERE";

String sharedKey = KeyUtil.generateSharedKey(myPrivateKey, publicKeyOfOtherParty);
```

3\. This shared key will be used for both encryption and decryption. The same sharedKey can be generated by the other party if your publicKey is shared with them.


## Encryption

1\. Get the public key of the BPP:
```java
String bppPublicKey = "BPP_PUBLIC_KEY_GOES_HERE";
```

2\. Generate the sharedKey using the BPP's public key and your private key:
```java
String myPrivateKey = "YOUR_PRIVATE_KEY_GOES_HERE";

String sharedKey = KeyUtil.generateSharedKey(myPrivateKey, bppPublicKey);
```

3\. Encrypt the data:
```java
String rawData = "Hello This is ONDC Test Data";

String encryptedData = EncryptionUtil.encryptData(sharedKey, rawData);
```

4\. Send the Encrypted data and your public key to the BPP.


## Decryption
1\. Get the Public key of the BAP:
```java
String bapPublicKey = "BAP_PUBLIC_KEY_GOES_HERE";
```

2\. Generate the shared key using your private key and BAP's public key:
```java
String myPrivateKey = "YOUR_PRIVATE_KEY_GOES_HERE";

String sharedKey = KeyUtil.generateSharedKey(myPrivateKey, bapPublicKey);
```

3\. Decrypt the data:
```java
String encryptedData = "ENCRYPTED_DATA_RECEIVED_FROM_BAP";

String decryptedData = EncryptionUtil.decryptData(sharedKey, encryptedData);

System.out.println(decryptedData); // Hello This is ONDC Test Data
```

## Abbrevations

BAP - Beckn Application Platform (Sender)

BPP - Beckn Provider Platform (Receiver)