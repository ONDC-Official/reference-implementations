# AES GCM Encryption and Decryption

Instructions for using the utility

## Add the following packages to your environment:

- [pycryptodomex](https://pypi.org/project/pycryptodomex/)
- [cryptography](https://pypi.org/project/cryptography/)
- [pycryptodome](https://pypi.org/project/pycryptodome/)

Add the following files to your project:

```
key_util.py
encryption_util.py
```

Make sure to import both of these files to your project.  
1\. Make sure to import key_util to generate key_pair and to generate shared_key.  
2\. Import encryption_util for encryption of raw_data and for decryption of encrypted data.

## Generating a Key Pair

1\. Generate Encryption Key Pair:

```python
key_pair = key_util.generate_key_pair()
```

2\. Save your Private key:

```python
private_key = key_pair.private_key
```

3\. Share your Public key with the other party:

```python
public_key = key_pair.public_key
```

## Generating a Shared key between two parties:

1\. Get the public key from the other party:

```python
public_key_of_other_party = "PUBLIC_KEY_GOES_HERE"
```

2\. Generate the sharedKey using your private key and public key of other party:

```python
my_private_key = "YOUR_PRIVATE_KEY_GOES_HERE"

shared_key = key_util.generate_shared_key(my_private_key, public_key_of_other_party)
```

3\. This shared key will be used for both encryption and decryption. The same sharedKey can be generated by the other party if your publicKey is shared with them.

## Encryption

1\. Get the public key of the BPP:

```python
bpp_public_key = "BPP_PUBLIC_KEY_GOES_HERE"
```

2\. Generate the sharedKey using the BPP's public key and your private key:

```python
my_private_key = "YOUR_PRIVATE_KEY_GOES_HERE"

shared_key = key_util.generate_shared_key(my_private_key, bpp_public_key)
```

3\. Encrypt the data:

```python
raw_data = "Hello This is ONDC Test Data"

encrypted_data = encryption_util.encrypt_data(shared_key, raw_data)
```

4\. Send the Encrypted data and your public key to the BPP.

## Decryption

1\. Get the Public key of the BAP:

```python
bap_public_key = "BAP_PUBLIC_KEY_GOES_HERE"
```

2\. Generate the shared key using your private key and BAP's public key:

```python
my_private_key = "YOUR_PRIVATE_KEY_GOES_HERE"

shared_key = key_util.generate_shared_key(my_private_key, bap_public_key)
```

3\. Decrypt the data:

```python
encrypted_data = "ENCRYPTED_DATA_RECEIVED_FROM_BAP"

decrypted_data = encryption_util.decrypt_data(shared_key, encrypted_data)

print(decrypted_data) # Hello This is ONDC Test Data
```

## Abbrevations

BAP - Beckn Application Platform (Sender)

BPP - Beckn Provider Platform (Receiver)
